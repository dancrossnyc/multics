2/22/79  -- Macro edit mode.

**This file is intended to be perused via dprint, print, or via an**
**editor.  It is not intended to be perused with the help command **






This package allows you to 
   1) Get printed representations of all keyboard macros defined
      in an environment into a buffer for
         a) Editing them.
         b) Re-defining them from the edited version
         c) Writing them out to a file, for later
	    I) Dprintng
	    II) Getting those macros automatically defined in a later
	        invocation of Emacs.

1. Getting printed representations of all your macros into a buffer.

   Make sure all your macros are hooked up to keys, or at least were at
   some time given names, then,

     ESC-x edit-macros  CR

   will put you in a buffer in "Macro Edit" mode with all the macros
   defined in that buffer in editable form.

  a. Editing them.

In Macro Edit mode, the following functions exist, on these keys:

esc-^A	macedit-find-beginning-of-macdef

	Move to the beginning of the current macro defintion.

esc-^B	macedit-backward-term

	Move backward one term in the keyboard macro.

esc-^C	macedit-compile-to-lisp

	Still under development, works a little bit, but impressive
	even for the little bit it works.  Compiles the macro being
	pointed at into lisp.

esc-^E	macedit-find-end-of-macdef

	Move to the end of the current macro definition.

esc-^F	macedit-forward-term

	Move forward one term in the current macro definition.

esc-^H	macedit-mark-whole-macro

	Put point and mark around the macro definition.

esc-^K	macedit-kill-term

	Kill forward to the end of the current (or next) term in
	the current macro definition.

esc-^N	macedit-forward-macdef

	Move forward to the beginning of the next macro definition.

esc-^P	macedit-backward-macdef

	Move backward to the beginning of the previous macro definition.

esc-^S	macedit-state-keyboard-macro

	Prompt for a key; place the definition of the keyboard macro on
	that key into the buffer at the current point.

b) Redefining them from the edited version:

esc-^Z	macedit-take-up-definition

	Take up into the editor, as a live definition, the current macro
	definition being pointed at.  Use this after editing a macro
	definition to redefine it thusly.


ESC-X load-these-macros

	Accept all the macro definitions in the buffer, redefine them
	all.

c) Writing them out.

   Use ^x^w as normal, any file you want, but if it has the suffix
   ".emacro", it will be automatically find-filed'd into Macro Edit
   mode when it is next find-file'd.

Macro language has PL/I like comments (/* comment... */). ESC-;,
ESC-P, and ESC-N do the right thing. The comment column is 51.
Quoted strings are double-quoted.  Macro definitions look like

   macro foo-the-bar on ^q
     ^S "bar" ESC ESC-# "foo"
   end-macro foo-the-bar

The "on ^q" is optional.  If present, it will cause a set-perm-key
to that macro.

The command

   ESC-X load-macrofile  PATHNAME CR

may be issued at any time to take up one of these macro files and define
all the keyboard macros in it.
