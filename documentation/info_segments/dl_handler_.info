03/04/85  dl_handler_


This subroutine has three entry points that issue queries for each of
three situations involving deletion.  These situations are:

     Deletion of an entry whose safety switch or copy switch is on.
     Deletion via a starname that matches all entries, e.g. "**".
     Deletion of a directory (delete_dir always queries).

This subroutine returns a status code depending on the user's answer.
If the user answers "yes", all three entry points turn off the safety
and copy switches, and in the case of a directory, set sma to the user
before returning.


Entry points in dl_handler_:
   (List is generated by the help command)


:Entry: dl_handler_:  03/04/85  dl_handler_


Function:
The dl_handler_ entry point, called when an entry has its safety switch
or copy switch on, issues a query of the form:

        <caller>:  <path> is protected.  Do you want to delete it?

If the user answers yes, dl_handler_ turns off both switches and
returns a zero status code.


Syntax:
dcl dl_handler_ entry (char(*), char(*), char(*), fixed bin(35));
call dl_handler_ (caller, dn, en, code);


Arguments:
caller
   is the name of the calling program, used to print the query.
   (Input)
dn
   is the directory name.  (Input)
en
   is the entry name.  (Input)
code
   is a standard status code.  (Output) It can be:
   0  the user answered yes, switches have been turned off, and the
      entry can now be deleted.
   error_table_$action_not_performed
      the user answered no.
   other codes
      the switches could not be turned off.


The two other entry points have the same calling sequence as
dl_handler_.


:Entry:  dblstar:  03/04/85 dl_handler_$dblstar


Function:  This entry point issues the query:

        Do you want to '<caller> <en>' in <dn>?

where caller, the name of the calling program, is assumed to be a
suitable verb.  This entry point is called, for example, by the delete
and unlink commands, which also pass a double starname as the value of
en:

        Do you want to 'delete **' in <dir_path>?
        Do you want to 'unlink **' in <dir_path>?



:Entry:  dirdelete:  03/04/85 dl_handler_$dirdelete


Function:  This entry point assumes it is given a directory pathname,
and issues the query:

        <caller>:  Do you want to delete the directory dn>en?

This entry point is called, for example, by the delete_dir command.
