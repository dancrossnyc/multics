05/10/84  hunt_dec

Syntax as a command:  hunt_dec {path} {-control_args}


Function:  searches a specified subtree of the hierarchy for all PL/I
object segments that are either freestanding or included in an archive
file.


Arguments:
path
   is the pathname of a directory to be interpreted as the root of the
   subtree in which to search and classify PL/I object segments.  If
   you don't specify path, the working directory is assumed.


Control arguments:
-aligned_decimal path, -ad path
   creates the ASCII segment listing the absolute pathnames of PL/I
   object segments and archive segments containing components
   classified as "aligned decimal" with path suffixed with "hd".
-unaligned_decimal path, -ud path
   creates the ASCII segment listing the absolute pathnames of PL/I
   object segments and archive segments containing components
   classified as "unaligned decimal" with path suffixed with "hd".


Notes:  Each PL/I object segment is classified according to its use of
arithmetic decimal instructions and how these instructions access the
data.  The three classes are "no decimal", "aligned decimal", and
"unaligned decimal".

This command aids you when PL/I programs compiled using "unaligned
decimal" are to be recompiled using the newer PL/I compiler
implementing packed decimal, which was part of Multics Release 8.0.
This was an incompatible change because the layout of variables
containing the unaligned and decimal attributes was changed.
Therefore, find those PL/I programs that used "unaligned decimal" so
that the appropriate program and data base changes can be made before
recompiling the program using the new compiler.


If you specify no control arguments, two ASCII segments are created in
the working directory.  One segment, aligned_decimal.hd, is a list of
the absolute pathnames of PL/I object segments and archive segments
containing PL/I object segments classified as "aligned decimal".  The
absolute pathname of the archive segment is followed by a space, then
by the name of the archive's component classified as "aligned decimal".
This occurs for each component of the archive that is classified as
such.  Another segment, unaligned_decimal.hd, is created in the working
directory for the class "unaligned decimal".  No segment is created for
the class "no decimal".


This command uses the following algorithm to classify PL/I object
segments.  The text section is scanned for EIS decimal arithmetic
instructions generated by the PL/I compiler.  If none are found, the
object segment is classified as "no decimal".  If some are found, they
and their descriptors are examined for address modification and nonzero
digit offsets.  If either is present, the object segment is classified
as "unaligned decimal"; otherwise, it is classified as "aligned
decimal".

This command forces access to all segments in its search path.  If
unable to access a segment, it bypasses the segment without classifying
it.
