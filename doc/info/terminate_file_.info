01/18/83  terminate_file_

Entry points in terminate_file_:
   (list is generated by the help command)


:Entry:  terminate_file_:  01/18/83  terminate_file_

Syntax:
dcl terminate_file_ entry (ptr, fixed bin (24), bit (*), fixed bin (35));
call terminate_file_ (seg_ptr, bit_count, switches, code);


Function:  Performs common operations after a program has finished
with a segment.  It optionally sets the bit count, truncates the
segment to a bit boundary, terminates a null reference name from the
segment, and ensures that modified pages of the segment are no longer
in main memory.  It can also be instructed to delete the segment.


Arguments:
seg_ptr
   is a pointer to the segment.  If null on input, no action is taken.
   Set to null after a null reference name on the segment is terminated.
   (Input/Output)
bit_count
   is the new bit count of the segment.  (Input)
switches
   control the action of this subroutine.  See the "Notes" section.
   (Input)
code
   is a standard status code.  (Output)


Notes:  The following structure describes the meanings of the switches.

 dcl 1 terminate_file_switches based,
       2 truncate	 bit (1) unal,
       2 set_bc	 bit (1) unal,
       2 terminate	 bit (1) unal,
       2 force_write bit (1) unal,
       2 delete	 bit (1) unal;

This structure is declared in terminate_file.incl.pl1.  The named
constants in the "List of named constants" section are also declared
with one or more of the above bits on.

If a request is made to delete the segment, any other options selected
are performed first in case it is not possible to delete the segment.


List of named constants:
TERM_FILE_TRUNC
   truncate the segment to bit_count bits
TERM_FILE_BC
   set the bit count to bit_count
TERM_FILE_TERM
   terminate a null reference name on the segment
TERM_FILE_TRUNC_BC
   truncate the segment to the bit_count bits and set the bit count
   to bit_count
TERM_FILE_TRUNC_BC_TERM
   truncate the segment to the bit_count bits, set the bit count to 
   bit_count, and terminate a null reference name on the segment


TERM_FILE_FORCE_WRITE
   ensure that modified pages of the segment are no longer in main
   memory
TERM_FILE_DELETE
   delete the segment
